<style>
.news-ticker{position:relative;overflow:hidden;background:linear-gradient(90deg,#0b1221,#0f172a);border-top:1px solid #22304a;border-bottom:1px solid #22304a}
.ticker-track{display:flex;gap:1rem;padding:.5rem .75rem;animation:marquee 50s linear infinite}
.ticker-card{display:flex;gap:.5rem;align-items:center;padding:.25rem .75rem;background:#0f1a2e;border:1px solid #22304a;border-radius:.5rem;white-space:nowrap;text-decoration:none;color:#e2e8f0}
.ticker-card img{width:56px;height:36px;object-fit:cover;border-radius:.25rem}
@keyframes marquee{from{transform:translateX(0)}to{transform:translateX(-50%)}}
@media (prefers-reduced-motion:reduce){.ticker-track{animation:none}}
</style>

<section class="news-ticker" aria-label="Latest disaster news">
  <div class="ticker-track" id="newsTrack" aria-live="polite"></div>
</section>

<script>
(async function loadTicker(){
  const el = document.getElementById('newsTrack');
  try {
    const res = await fetch("https://api.reliefweb.int/v1/reports?appname=hazardhub&profile=list&preset=latest&limit=12");
    const data = await res.json();
    const items = (data.data||[]).map(x => ({
      title: x.fields.title,
      url: x.fields.url,
      image: x.fields?.primary_image?.url || x.fields?.thumbnail?.url || null
    }));
    el.innerHTML = '';
    const make = n => {
      const a = document.createElement('a');
      a.href = n.url; a.target = '_blank'; a.rel = 'noopener'; a.className = 'ticker-card';
      a.innerHTML = (n.image ? `<img src="${n.image}" alt="">` : '') + `<span>${n.title}</span>`;
      return a;
    };
    const cards = items.map(make);
    [...cards, ...cards].forEach(c => el.appendChild(c)); // duplicate for smooth loop
  } catch (e) {
    el.innerHTML = '<span style="color:#94a3b8">Unable to load latest news right now.</span>';
  }
})();
</script>
<section class="news-ticker" aria-label="Latest disaster news">
  <div class="ticker-track" id="newsTrack" aria-live="polite"></div>
</section>
<!doctype html><html lang='en'><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'><title>Disaster Portal</title><link rel='icon' href='assets/icon.png'><link rel='manifest' href='manifest.webmanifest'><link rel='stylesheet' href='styles.css'></head><body><header class='site-header'><div class='brand'><img src='assets/icon.png' alt='' class='logo'><div><h1>Disaster Portal</h1><p class='tagline'>Timely alerts Â· Clear guidance Â· Local resources</p></div></div><div class='actions'><button id='langToggle' class='btn' aria-label='Toggle language'>EN/HI</button><button id='themeToggle' class='btn' aria-label='Toggle theme'>ðŸŒ“</button><button id='shareBtn' class='btn' aria-label='Share'><span>Share</span></button></div></header><nav class='toolbar' aria-label='Filters'><div class='filters'><label><span>Hazard</span><select id='hazard'><option value='all' selected>All</option><option value='flood'>Flood</option><option value='cyclone'>Cyclone</option><option value='heatwave'>Heatwave</option><option value='earthquake'>Earthquake</option><option value='landslide'>Landslide</option><option value='lightning'>Lightning</option></select></label><label><span>District</span><input id='district' type='search' placeholder='Search districtâ€¦'></label><label><span>Severity</span><select id='severity'><option value='all'>All</option><option value='advisory'>Advisory</option><option value='yellow'>Yellow</option><option value='orange'>Orange</option><option value='red'>Red</option></select></label><label><span>Sort</span><select id='sort'><option value='newest'>Newest first</option><option value='oldest'>Oldest first</option><option value='severity'>Severity</option></select></label><button id='clear' class='btn subtle'>Clear</button></div><div id='status' class='status' aria-live='polite'></div></nav><main id='main'><section aria-labelledby='alertsTitle' class='block'><h2 id='alertsTitle'>Live Alerts</h2><div id='alerts' class='cards' role='feed' aria-busy='true'></div><div class='pager'><button id='prevPage' class='btn subtle' disabled>Prev</button><span id='pageInfo' class='muted'></span><button id='nextPage' class='btn subtle' disabled>Next</button></div></section><section aria-labelledby='guidesTitle' class='block'><h2 id='guidesTitle'>Guides & SOPs</h2><div id='guides' class='cards'></div></section><section aria-labelledby='mapTitle' class='block grid2'><div><h2 id='mapTitle'>Local Maps</h2><div class='map'><iframe title='Open Map' src='https://www.openstreetmap.org/export/embed.html?bbox=77.5%2C12.8%2C77.8%2C13.1&layer=mapnik' loading='lazy'></iframe></div><p class='muted'>Replace with state EOC dashboard / radar / reservoir status or your GIS web map.</p></div><div><h3>Shelters & Relief Points</h3><ul id='shelters' class='list'></ul></div></section><section aria-labelledby='reportTitle' class='block grid2'><div><h2 id='reportTitle'>Report an Issue</h2><p>Use this form to report blocked roads, damages, missing persons, or urgent needs.</p><a id='reportForm' class='btn primary' href='#' target='_blank' rel='noopener'>Open Report Form</a><p class='muted'>Admins can route submissions to control rooms via email/SMS.</p></div><div><h3>Emergency Contacts</h3><ul id='contacts' class='list'></ul></div></section><section aria-labelledby='mediaTitle' class='block grid2'><div><h2 id='mediaTitle'>Press & Updates</h2><ul id='press' class='list'></ul></div><div><h3>FAQs</h3><details><summary>How are alerts verified?</summary><p>Alerts are curated by admins from official sources and carry a timestamp.</p></details><details><summary>How do I volunteer?</summary><p>Check the Guides section for volunteer SOPs and register via the report form.</p></details></div></section></main><footer class='site-footer'><p><strong>Disclaimer:</strong> This site is for public awareness. Follow official government advisories at all times.</p><p class='muted'>Â© <span id='year'></span> Disaster Portal â€¢ <a href='admin.html'>Admin</a></p></footer><script src='script.js'></script></body></html>